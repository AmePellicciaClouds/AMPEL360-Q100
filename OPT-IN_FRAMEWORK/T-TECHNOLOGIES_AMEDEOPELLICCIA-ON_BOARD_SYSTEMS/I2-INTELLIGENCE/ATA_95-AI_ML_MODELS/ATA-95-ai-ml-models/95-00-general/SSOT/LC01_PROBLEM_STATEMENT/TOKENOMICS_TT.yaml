# ═══════════════════════════════════════════════════════════════════════════════
# TOKENOMICS_TT.yaml — ATA 95-00 AI/ML Models General
# ═══════════════════════════════════════════════════════════════════════════════
# OPT-IN Axis: T-TECHNOLOGIES / I2-INTELLIGENCE
# Scope: Cross-cutting AI/ML governance framework
# ═══════════════════════════════════════════════════════════════════════════════

tokenomics:
  token_symbol: "TT"
  unit: "deg"
  deg_per_tt: 360
  version: "3.14"

# ─────────────────────────────────────────────────────────────────────────────
# Node-Level Pool
# ─────────────────────────────────────────────────────────────────────────────
node_pool:
  node_id: "ATA-95-00"
  total_tt: 800
  total_deg: 288000
  
  knot_allocation:
    KNOT-95-00-001: 100  # ML Certification Strategy
    KNOT-95-00-002: 100  # Learning Assurance Framework
    KNOT-95-00-003: 100  # Training Data Governance
    KNOT-95-00-004: 100  # V&V Methodology for ML
    KNOT-95-00-005: 100  # Runtime Monitoring Architecture
    KNOT-95-00-006: 100  # Explainability Requirements
    KNOT-95-00-007: 100  # Human-AI Interaction Design
    KNOT-95-00-008: 100  # ML Tool Qualification

# ─────────────────────────────────────────────────────────────────────────────
# Eligibility Criteria
# ─────────────────────────────────────────────────────────────────────────────
eligibility:
  require_status: ["COMPLETE", "ACCEPTED"]
  require_links_resolved: true
  require_brex_pass_for_pub: true
  require_peer_review: true
  require_authority_alignment: true  # Novel for AI/ML certification artifacts

# ─────────────────────────────────────────────────────────────────────────────
# Allocation Algorithm
# ─────────────────────────────────────────────────────────────────────────────
allocation:
  method: "effort_plus_impact"
  
  formula: |
    w_i = α · Ê_i + (1 - α) · Î_i
    T_i = P_k · w_i
    
    Where:
      P_k = Pool amount (TT) for KNOT k
      α = effort_weight (0.30)
      Ê_i = Normalized effort: E_i / Σ E_i
      Î_i = Normalized impact: I_i / Σ I_i
      I_i = Effective impact: ΔR_k,i + λ · S_i
      S_i = Spillover: Σ(a_k→j · ΔR_j,i) for adjacent KNOTs
      λ = spillover_multiplier (0.60)
  
  params:
    effort_weight: 0.30
    impact_weight: 0.70
    spillover_multiplier: 0.60  # Higher than standard (0.50) due to strong interdependencies
    rounding: "floor_deg"
    minimum_award_deg: 360  # Minimum 1 TT per qualifying contribution

# ─────────────────────────────────────────────────────────────────────────────
# Complexity Multipliers
# ─────────────────────────────────────────────────────────────────────────────
complexity_multipliers:
  KNOT-95-00-001: 1.3  # Novel certification pathway - high regulatory uncertainty
  KNOT-95-00-002: 1.2  # New assurance paradigm
  KNOT-95-00-003: 1.1  # Data governance complexity
  KNOT-95-00-004: 1.2  # Novel V&V methods
  KNOT-95-00-005: 1.1  # Runtime assurance novelty
  KNOT-95-00-006: 1.0  # Standard complexity
  KNOT-95-00-007: 1.0  # Standard complexity
  KNOT-95-00-008: 1.1  # Tool qualification novelty

# ─────────────────────────────────────────────────────────────────────────────
# Adjacency Matrix (Spillover Weights)
# ─────────────────────────────────────────────────────────────────────────────
# Values represent influence weight a_k→j from row KNOT to column KNOT
# Higher values = stronger spillover credit

adjacency_matrix:
  KNOT-95-00-001:  # Certification Strategy influences all
    KNOT-95-00-002: 0.9  # Drives LA framework
    KNOT-95-00-003: 0.7  # Sets data requirements baseline
    KNOT-95-00-004: 0.8  # Drives V&V approach
    KNOT-95-00-005: 0.7  # Influences monitoring requirements
    KNOT-95-00-006: 0.6  # Certification view on explainability
    KNOT-95-00-007: 0.5  # Human factors certification
    KNOT-95-00-008: 0.8  # Tool qualification requirements
    
  KNOT-95-00-002:  # Learning Assurance Framework
    KNOT-95-00-001: 0.6  # Feeds back to cert strategy
    KNOT-95-00-003: 0.8  # Data requirements from LA
    KNOT-95-00-004: 0.9  # V&V derives from LA objectives
    KNOT-95-00-005: 0.7  # Monitoring from LA requirements
    KNOT-95-00-006: 0.7  # Explainability from LA
    KNOT-95-00-007: 0.5  # Human factors linkage
    KNOT-95-00-008: 0.7  # Tool requirements from LA process
    
  KNOT-95-00-003:  # Training Data Governance
    KNOT-95-00-001: 0.4  # Evidence for certification
    KNOT-95-00-002: 0.5  # Data aspects of LA
    KNOT-95-00-004: 0.8  # V&V test data requirements
    KNOT-95-00-005: 0.5  # OOD detection training data
    KNOT-95-00-006: 0.4  # Explainability data needs
    KNOT-95-00-007: 0.3  # Limited HF linkage
    KNOT-95-00-008: 0.6  # Data tool qualification
    
  KNOT-95-00-004:  # V&V Methodology
    KNOT-95-00-001: 0.5  # V&V evidence for cert
    KNOT-95-00-002: 0.6  # V&V validates LA
    KNOT-95-00-003: 0.5  # Data V&V requirements
    KNOT-95-00-005: 0.8  # Monitor verification
    KNOT-95-00-006: 0.6  # Explainability V&V
    KNOT-95-00-007: 0.4  # Human factors V&V
    KNOT-95-00-008: 0.5  # V&V tool qualification
    
  KNOT-95-00-005:  # Runtime Monitoring
    KNOT-95-00-001: 0.5  # Runtime assurance for cert
    KNOT-95-00-002: 0.4  # LA monitoring aspects
    KNOT-95-00-003: 0.3  # Monitor training data
    KNOT-95-00-004: 0.5  # Monitor V&V
    KNOT-95-00-006: 0.6  # Runtime explainability
    KNOT-95-00-007: 0.7  # Human awareness of AI state
    KNOT-95-00-008: 0.3  # Monitor tool qualification
    
  KNOT-95-00-006:  # Explainability
    KNOT-95-00-001: 0.4  # Cert evidence
    KNOT-95-00-002: 0.4  # LA explainability aspects
    KNOT-95-00-003: 0.3  # Explanation data
    KNOT-95-00-004: 0.4  # V&V of explanations
    KNOT-95-00-005: 0.5  # Runtime explanations
    KNOT-95-00-007: 0.8  # Human understanding
    KNOT-95-00-008: 0.3  # XAI tool qualification
    
  KNOT-95-00-007:  # Human-AI Interaction
    KNOT-95-00-001: 0.4  # Human factors cert
    KNOT-95-00-002: 0.3  # Human in LA loop
    KNOT-95-00-003: 0.2  # Limited data linkage
    KNOT-95-00-004: 0.3  # HF V&V aspects
    KNOT-95-00-005: 0.6  # Human response to monitors
    KNOT-95-00-006: 0.7  # Explanation consumption
    KNOT-95-00-008: 0.2  # Limited tool linkage
    
  KNOT-95-00-008:  # ML Tool Qualification
    KNOT-95-00-001: 0.6  # Tool qual for cert
    KNOT-95-00-002: 0.5  # LA process tools
    KNOT-95-00-003: 0.6  # Data pipeline tools
    KNOT-95-00-004: 0.5  # V&V tools
    KNOT-95-00-005: 0.3  # Monitor tools
    KNOT-95-00-006: 0.3  # XAI tools
    KNOT-95-00-007: 0.2  # Limited HF tool linkage

# ─────────────────────────────────────────────────────────────────────────────
# Measurement Configuration
# ─────────────────────────────────────────────────────────────────────────────
measurement:
  residual_scale: "0..100"
  
  required_fields_per_knu:
    - effort_predicted
    - effort_actual
    - delta_residual_primary
    - delta_residual_adjacent_sum
    - verification_status
    - linked_artifacts
    - authority_alignment_status  # Novel for AI/ML
    
  effort_units: "story_points"
  effort_normalization: "relative_to_pool"

# ─────────────────────────────────────────────────────────────────────────────
# Closure Record Template
# ─────────────────────────────────────────────────────────────────────────────
closure_record:
  residual_before: 100
  residual_after: null          # Populated at closure
  residual_target: 10           # Default; per-KNOT targets in KNOTS.csv
  closure_date: null
  approved_by: null
  evidence_pack_uri: null
  authority_concurrence: null   # Novel for AI/ML certification

# ─────────────────────────────────────────────────────────────────────────────
# Distribution Rules
# ─────────────────────────────────────────────────────────────────────────────
distribution_rules:
  timing: "upon_knot_closure"
  validation_required: true
  min_contributors: 1
  max_award_per_contributor_pct: 40  # No single contributor > 40% of pool
  
  bonus_conditions:
    - condition: "authority_positive_feedback"
      multiplier: 1.10
      description: "10% bonus for positive EASA/FAA feedback on artifacts"
    - condition: "early_closure"
      multiplier: 1.05
      description: "5% bonus for closure >2 weeks before target date"
    - condition: "zero_rework"
      multiplier: 1.05
      description: "5% bonus for artifacts accepted without revision"

# ─────────────────────────────────────────────────────────────────────────────
# Audit Configuration
# ─────────────────────────────────────────────────────────────────────────────
audit:
  ledger_file: "AWARDS_TT.csv"
  hash_algorithm: "SHA-256"
  require_dual_approval: true
  retention_years: 10
  export_format: "JSON-LD"
  dpp_integration: true

# ─────────────────────────────────────────────────────────────────────────────
# Metadata
# ─────────────────────────────────────────────────────────────────────────────
metadata:
  created: "2026-01-11"
  created_by: "AMPEL360 Baseline Architect"
  last_updated: "2026-01-11"
  version: "1.0"
  status: "ACTIVE"
